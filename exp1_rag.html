<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>å®éªŒï¼šRAGæ£€ç´¢å¢å¼ºçŸ¥è¯†é—®ç­”ç³»ç»Ÿ</title>
  <link rel="stylesheet" href="style.css">
  <script>
    // ä»£ç å—å¤åˆ¶åŠŸèƒ½
    document.addEventListener('DOMContentLoaded', function() {
      // ä¸ºæ‰€æœ‰ä»£ç å—æ·»åŠ å¤åˆ¶æŒ‰é’®
      const codeBlocks = document.querySelectorAll('pre');

      codeBlocks.forEach(function(block, index) {
        // åˆ›å»ºä»£ç å—å¤´éƒ¨
        const header = document.createElement('div');
        header.className = 'code-header';

        // å°è¯•æ£€æµ‹è¯­è¨€
        const code = block.querySelector('code');
        let language = 'text';
        if (code) {
          const classes = code.className.split(' ');
          const langClass = classes.find(cls => cls.startsWith('language-'));
          if (langClass) {
            language = langClass.replace('language-', '');
          }
        }

        header.innerHTML = `
          <span class="code-language">${language}</span>
          <button class="copy-btn" data-code-index="${index}">å¤åˆ¶</button>
        `;

        // å°†å¤´éƒ¨æ’å…¥åˆ°preå…ƒç´ å†…éƒ¨
        block.insertBefore(header, block.firstChild);
      });

      // æ·»åŠ å¤åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('copy-btn')) {
          const btn = e.target;
          const index = btn.getAttribute('data-code-index');
          const codeBlock = document.querySelectorAll('pre')[index];
          const code = codeBlock.querySelector('code');

          if (code) {
            // å¤åˆ¶ä»£ç å†…å®¹
            navigator.clipboard.writeText(code.textContent).then(function() {
              // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçŠ¶æ€
              btn.textContent = 'å·²å¤åˆ¶!';
              btn.classList.add('copied');

              // 3ç§’åæ¢å¤åŸçŠ¶
              setTimeout(function() {
                btn.textContent = 'å¤åˆ¶';
                btn.classList.remove('copied');
              }, 3000);
            }).catch(function(err) {
              console.error('å¤åˆ¶å¤±è´¥:', err);
              btn.textContent = 'å¤åˆ¶å¤±è´¥';
              setTimeout(function() {
                btn.textContent = 'å¤åˆ¶';
              }, 2000);
            });
          }
        }
      });
    });
  </script>
</head>
<body>
<header class="site-header">
  <div class="header-left">
    <a href="index.html" class="home-link">ğŸ  é¦–é¡µ</a>
    <div class="logo">å¤šåª’ä½“è¯¾ç¨‹å®éªŒåœ¨çº¿å¹³å°</div>
  </div>
  <nav class="top-nav">
    <a href="index.html">é¦–é¡µ</a>
    <a href="exp1_rag.html" class="active">å®éªŒä¸€ï¼šRAGç³»ç»Ÿ</a>
    <a href="exp2_voice_agent.html">å®éªŒäºŒï¼šè¯­éŸ³AIä»£ç†</a>
    <a href="exp3_robot.html">å®éªŒä¸‰ï¼šæœºæ¢°è‡‚åƒåœ¾åˆ†ç±»</a>
    <a href="exp4_video.html">å®éªŒå››ï¼šAIè§†é¢‘ç¼–è¾‘</a>
    <a href="exp5_web_design.html">å®éªŒäº”ï¼šç½‘é¡µåˆ¶ä½œ</a>
  </nav>
</header>

<main class="container">
  <header class="sub-header">
    <h1 id="top">å®éªŒï¼šRAGæ£€ç´¢å¢å¼ºçŸ¥è¯†é—®ç­”ç³»ç»Ÿ</h1>
    <p class="sub-meta">
      ç›®çš„ï¼šä½¿ç”¨ RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»ç»Ÿè¿›è¡ŒçŸ¥è¯†é—®ç­”ï¼Œç†è§£å…¶åŸç†å¹¶å®Œæˆç®€å•ç³»ç»Ÿæ­å»ºã€‚
    </p>
    <nav class="sub-nav">
      <a href="#purpose">å®éªŒç›®çš„åŠå†…å®¹</a> |
      <a href="#points">å®éªŒè¦ç‚¹</a> |
      <a href="#env">å®éªŒç¯å¢ƒ</a> |
      <a href="#supplementary">ç›¸å…³è¡¥å……è¯´æ˜</a> |
      <a href="#project_structure">é¡¹ç›®ç»“æ„ä»‹ç»</a> |
      <a href="#model_modules">æ¨¡å‹å°è£…æ¨¡å—</a> |
      <a href="#utils_details">å·¥å…·å‡½æ•°æ¨¡å—</a> |
      <a href="#rag_chain">RAGé“¾æ ¸å¿ƒæ¨¡å—</a> |
      <a href="#main_program">ä¸»ç¨‹åºæ¨¡å—</a> |
      <a href="#experiment_steps">å®éªŒæ­¥éª¤</a> |
      <a href="#tasks">å®éªŒä»»åŠ¡</a> |
      <a href="#report">å®éªŒæŠ¥å‘Šè¦æ±‚</a> |
      <a href="#top">è¿”å›é¡¶éƒ¨</a>
    </nav>
  </header>

  <section class="section" id="purpose">
    <h2>ä¸€ã€å®éªŒç›®çš„åŠå†…å®¹</h2>
    <p><strong>ç›®çš„ï¼š</strong>ä½¿ç”¨ RAG ç³»ç»Ÿè¿›è¡ŒçŸ¥è¯†é—®ç­”ï¼Œæå‡åŸºäºæ–‡æ¡£çš„é—®ç­”æ•ˆæœã€‚</p>
    <p><strong>å†…å®¹ï¼š</strong></p>
    <p>
      RAG æ˜¯ä¸€ç§ç»“åˆä¿¡æ¯æ£€ç´¢ä¸ç”Ÿæˆå¼ AI çš„æŠ€æœ¯ï¼Œé€šè¿‡ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å¢å¼ºå¤§è¯­è¨€æ¨¡å‹çš„å›ç­”èƒ½åŠ›ã€‚
      æœ¬å®éªŒå°†å­¦ä¹ å¦‚ä½•æ„å»ºä¸€ä¸ªå®Œæ•´çš„ RAG ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼šæ–‡æ¡£åŠ è½½ã€å‘é‡åŒ–å­˜å‚¨ã€ç›¸ä¼¼åº¦æ£€ç´¢å’Œç­”æ¡ˆç”Ÿæˆç­‰æ ¸å¿ƒæ¨¡å—ã€‚
    </p>
  </section>

  <section class="section" id="points">
    <h2>äºŒã€å®éªŒè¦ç‚¹</h2>
    <ul>
      <li>äº†è§£ RAG ç³»ç»Ÿçš„åŸºæœ¬åŸç†å’Œå·¥ä½œæµç¨‹ã€‚</li>
      <li>å­¦ä¹  LangChain æ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</li>
      <li>æŒæ¡æ–‡æ¡£åŠ è½½ã€æ–‡æœ¬åˆ†å‰²ã€å‘é‡åŒ–å­˜å‚¨ç­‰å…³é”®æŠ€æœ¯ã€‚</li>
      <li>å­¦ä¼šä½¿ç”¨ FAISS è¿›è¡Œé«˜æ•ˆå‘é‡æ£€ç´¢ã€‚</li>
      <li>ç†è§£å¦‚ä½•å°†æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸å¤§è¯­è¨€æ¨¡å‹ç»“åˆç”Ÿæˆç­”æ¡ˆã€‚</li>
    </ul>
  </section>

  <section class="section" id="env">
    <h2>ä¸‰ã€å®éªŒç¯å¢ƒ</h2>
    <ul>
      <li>Python 3</li>
      <li>LangChain æ¡†æ¶</li>
      <li>FAISS å‘é‡æ•°æ®åº“</li>
      <li>Qwen å¤§è¯­è¨€æ¨¡å‹ï¼ˆé€šè¿‡ API ç«¯ç‚¹è®¿é—®ï¼‰</li>
    </ul>
  </section>

  <section class="section" id="supplementary">
    <h2>å››ã€ç›¸å…³è¡¥å……è¯´æ˜</h2>

    <h3>4.1 æºç å’Œå®éªŒæ‰‹å†Œ</h3>
    <div class="download-section">
      <p>ä¸‹è½½é“¾æ¥ï¼ˆæºç ä¸å®éªŒæ‰‹å†Œæ‰“åŒ…ï¼‰ï¼š</p>
      <a href="https://tnt.georgedonne.cn/ailab/nlp251113" target="_blank" class="btn download-btn">
        ğŸ“ ä¸‹è½½ rag_starter.zip
      </a>
      <p class="file-info">
        å»ºè®®ä¿å­˜ä¸º <code>rag_starter.zip</code>ï¼Œå¹¶å­˜æ”¾åˆ° <code>/home/cg/ailab</code> ç›®å½•ï¼Œä¾¿äºåç»­è§£å‹ä¸è¿è¡Œã€‚
      </p>
    </div>

    <p>ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°† zip åŒ…è§£å‹ç¼©ï¼š</p>
    <pre><code class="language-bash">cd /home/cg/ailab       # å‡å®š zip æ–‡ä»¶ä¿å­˜åœ¨ /home/cg/ailab ç›®å½•
ls -l                   # ç¡®è®¤ä¸‹ zip æ–‡ä»¶æ˜¯å¦åœ¨è¯¥ç›®å½•ä¸­
unzip rag_starter.zip   # å‡å®š zip æ–‡ä»¶åæ˜¯rag_starter.zip</code></pre>

    <h3>4.2 å„ä¸ªç›®å½•ä¸‹çš„ __init__.py</h3>

    <h4>é¡¹ç›®æ ¹ç›®å½• ./__init__.py</h4>
    <pre><code>"""
RAG Starter - åŸºäº LangChain çš„ RAG ç³»ç»Ÿ
"""
__version__ = "1.0.0"</code></pre>

    <h4>chains/__init__.py</h4>
    <pre><code>"""
RAG é“¾æ¨¡å—
"""
from .rag_chain import RAGChain

__all__ = ["RAGChain"]</code></pre>

    <h4>config/__init__.py</h4>
    <pre><code>"""
é…ç½®æ¨¡å—
"""
from .settings import settings

__all__ = ["settings"]</code></pre>

    <h4>models/__init__.py</h4>
    <pre><code>"""
æ¨¡å‹æ¨¡å— - å¯¼å‡º LLM å’ŒåµŒå…¥æ¨¡å‹
"""
from .llm import get_llm
from .embedding import get_embedding_model

__all__ = ["get_llm", "get_embedding_model"]</code></pre>

    <h4>utils/__init__.py</h4>
    <pre><code>"""
å·¥å…·æ¨¡å— - å¯¼å‡ºæ–‡æ¡£åŠ è½½å™¨
"""
from .document_loader import load_documents, split_documents

__all__ = ["load_documents", "split_documents"]</code></pre>

    <h3>4.3 å®‰è£… VS Code</h3>
    <ol>
      <li>è®¿é—® VS Code å®˜ç½‘</li>
      <li>ä¸‹è½½ ubuntu arm64 .deb</li>
      <li>æ‰§è¡Œ <code>sudo dpkg -i ä¸‹è½½çš„åŒ…å.deb</code> å®‰è£…</li>
    </ol>

    <h3>4.4 æœ¬åœ°ç¬”è®°æœ¬è£… MobaXterm</h3>
    <p>ä¸‹è½½é“¾æ¥ï¼š<a href="https://tnt.georgedonne.cn/ailab/nlp251113" target="_blank">MobaXterm_Portable_v25.3.zip</a></p>
    <p>ä¸‹è½½åˆ°ç¬”è®°æœ¬ï¼Œè§£å‹ç¼©åå°±å¯è¿è¡Œã€‚å¯é€šè¿‡ç¬”è®°æœ¬è¿æ¥å¼€å‘æ¿ã€‚</p>
  </section>

  <section class="section" id="project_structure">
    <h2>äº”ã€é¡¹ç›®ç»“æ„ä»‹ç»</h2>

    <h3>5.1 é¡¹ç›®ç»“æ„</h3>
    <pre><code>RAGç³»ç»Ÿé¡¹ç›®ç»“æ„ï¼š
â”œâ”€â”€ chains/                 # RAGé“¾æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ rag_chain.py       # RAGé“¾æ ¸å¿ƒå®ç°
â”œâ”€â”€ config/                 # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py        # ç³»ç»Ÿé…ç½®
â”œâ”€â”€ models/                 # æ¨¡å‹æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ embedding.py       # åµŒå…¥æ¨¡å‹å°è£…
â”‚   â””â”€â”€ llm.py             # LLMæ¨¡å‹å°è£…
â”œâ”€â”€ utils/                  # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ document_loader.py # æ–‡æ¡£åŠ è½½å™¨
â”œâ”€â”€ vectorstore/            # å‘é‡å­˜å‚¨ç›®å½•ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”œâ”€â”€ kb.txt                 # é»˜è®¤çŸ¥è¯†åº“æ–‡ä»¶
â”œâ”€â”€ main.py                # ä¸»ç¨‹åº
â”œâ”€â”€ requirements.txt       # ä¾èµ–åŒ…åˆ—è¡¨
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜</code></pre>

    <h3>5.2 é…ç½®æ¨¡å—è¯¦è§£ï¼ˆconfig/settings.pyï¼‰</h3>

    <h4>æ ·ä¾‹ä»£ç </h4>
    <pre><code class="language-python">"""
ç³»ç»Ÿé…ç½®
"""
import os
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    # API é…ç½®
    api_key: str = ""
    base_url: str = "https://api.tnt.georgedonne.cn/v1"

    # æ¨¡å‹é…ç½®
    llm_model: str = "qwen2.5-14b-instruct"
    embedding_model: str = "text2vec-large-chinese"

    # æ–‡æ¡£å¤„ç†é…ç½®
    chunk_size: int = 500
    chunk_overlap: int = 50

    # æ£€ç´¢é…ç½®
    top_k: int = 3

    # å‘é‡å­˜å‚¨é…ç½®
    vectorstore_path: str = "./vectorstore"

    class Config:
        env_file = ".env"

settings = Settings()</code></pre>

    <h4>é…ç½®å‚æ•°è¯´æ˜</h4>
    <ul>
      <li><strong>api_key</strong>: APIå¯†é’¥ï¼Œç”¨äºè®¿é—®æ¨¡å‹æœåŠ¡</li>
      <li><strong>base_url</strong>: APIæœåŠ¡çš„åŸºç¡€URL</li>
      <li><strong>llm_model</strong>: ä½¿ç”¨çš„LLMæ¨¡å‹åç§°</li>
      <li><strong>embedding_model</strong>: ä½¿ç”¨çš„åµŒå…¥æ¨¡å‹åç§°</li>
      <li><strong>chunk_size</strong>: æ–‡æ¡£åˆ†å‰²çš„å—å¤§å°</li>
      <li><strong>chunk_overlap</strong>: æ–‡æ¡£å—ä¹‹é—´çš„é‡å å¤§å°</li>
      <li><strong>top_k</strong>: æ£€ç´¢æ—¶è¿”å›çš„æœ€ç›¸ä¼¼æ–‡æ¡£æ•°é‡</li>
      <li><strong>vectorstore_path</strong>: å‘é‡å­˜å‚¨ä¿å­˜è·¯å¾„</li>
    </ul>

    <h4>ç¯å¢ƒå˜é‡æ”¯æŒ</h4>
    <p>ç³»ç»Ÿæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡æˆ–.envæ–‡ä»¶æ¥é…ç½®å‚æ•°ï¼Œæé«˜å®‰å…¨æ€§ã€‚</p>
  </section>

  <section class="section" id="model_modules">
    <h2>å…­ã€æ¨¡å‹å°è£…æ¨¡å—è¯¦è§£</h2>

    <h3>6.1 LLM æ¨¡å‹å°è£…ï¼ˆmodels/llm.pyï¼‰</h3>

    <h4>æ ·ä¾‹ä»£ç </h4>
    <pre><code class="language-python">"""
LLM æ¨¡å‹å°è£…æ¨¡å—
"""
from langchain_openai import ChatOpenAI
from config.settings import settings

def get_llm(temperature: float = 0.1) -> ChatOpenAI:
    """
    è·å– LLM å®ä¾‹

    Args:
        temperature: æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶ç”Ÿæˆæ–‡æœ¬çš„éšæœºæ€§

    Returns:
        ChatOpenAI: é…ç½®å¥½çš„ LLM å®ä¾‹
    """
    return ChatOpenAI(
        model=settings.llm_model,
        openai_api_key=settings.api_key,
        openai_api_base=settings.base_url,
        temperature=temperature,
    )</code></pre>

    <h3>6.2 åµŒå…¥æ¨¡å‹å°è£…ï¼ˆmodels/embedding.pyï¼‰</h3>

    <h4>æ ·ä¾‹ä»£ç </h4>
    <pre><code class="language-python">"""
åµŒå…¥æ¨¡å‹å°è£…æ¨¡å—
"""
from langchain_openai import OpenAIEmbeddings
from config.settings import settings

def get_embedding_model() -> OpenAIEmbeddings:
    """
    è·å–åµŒå…¥æ¨¡å‹å®ä¾‹

    Returns:
        OpenAIEmbeddings: é…ç½®å¥½çš„åµŒå…¥æ¨¡å‹å®ä¾‹
    """
    return OpenAIEmbeddings(
        model=settings.embedding_model,
        openai_api_key=settings.api_key,
        openai_api_base=settings.base_url,
    )</code></pre>
  </section>

  <section class="section" id="utils_details">
    <h2>ä¸ƒã€å·¥å…·å‡½æ•°æ¨¡å—è¯¦è§£ï¼ˆutils/document_loader.pyï¼‰</h2>

    <h4>æ ·ä¾‹ä»£ç </h4>
    <pre><code class="language-python">"""
æ–‡æ¡£åŠ è½½å’Œå¤„ç†å·¥å…·
"""
from langchain_community.document_loaders import (
    TextLoader,
    PyPDFLoader,
    UnstructuredMarkdownLoader,
)
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain_core.documents import Document
from config.settings import settings
from typing import List

def load_documents(file_path: str) -> List[Document]:
    """
    æ ¹æ®æ–‡ä»¶ç±»å‹åŠ è½½æ–‡æ¡£

    Args:
        file_path: æ–‡ä»¶è·¯å¾„

    Returns:
        List[Document]: åŠ è½½çš„æ–‡æ¡£åˆ—è¡¨
    """
    if file_path.endswith('.txt'):
        loader = TextLoader(file_path, encoding='utf-8')
    elif file_path.endswith('.pdf'):
        loader = PyPDFLoader(file_path)
    elif file_path.endswith(('.md', '.markdown')):
        loader = UnstructuredMarkdownLoader(file_path)
    else:
        raise ValueError(f"ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: {file_path}")

    return loader.load()

def split_documents(documents: List[Document]) -> List[Document]:
    """
    å°†æ–‡æ¡£åˆ†å‰²æˆå°å—

    Args:
        documents: åŸå§‹æ–‡æ¡£åˆ—è¡¨

    Returns:
        List[Document]: åˆ†å‰²åçš„æ–‡æ¡£å—åˆ—è¡¨
    """
    text_splitter = RecursiveCharacterTextSplitter(
        chunk_size=settings.chunk_size,
        chunk_overlap=settings.chunk_overlap,
        separators=["\n\n", "\n", "ã€‚", "ï¼", "ï¼Ÿ", "ï¼Œ", " ", ""]
    )

    return text_splitter.split_documents(documents)</code></pre>
  </section>

  <section class="section" id="rag_chain">
    <h2>å…«ã€RAG é“¾æ ¸å¿ƒæ¨¡å—è¯¦è§£ï¼ˆchains/rag_chain.pyï¼‰</h2>

    <h3>8.1 å®Œæ•´æ ·ä¾‹ä»£ç </h3>
    <pre><code class="language-python">"""
RAG é“¾æ ¸å¿ƒæ¨¡å—
"""
import os
from langchain_community.vectorstores import FAISS
from langchain.chains import RetrievalQA
from langchain_core.prompts import PromptTemplate
from models.llm import get_llm
from models.embedding import get_embedding_model
from utils.document_loader import load_documents, split_documents
from config.settings import settings
from typing import List, Optional
from langchain_core.documents import Document

class RAGChain:
    def __init__(self):
        self.llm = get_llm()
        self.embedding_model = get_embedding_model()
        self.vectorstore = None
        self.qa_chain = None

    def build_vector_store(self, file_path: str, append: bool = False) -> None:
        """
        æ„å»ºå‘é‡å­˜å‚¨

        Args:
            file_path: æ–‡æ¡£æ–‡ä»¶è·¯å¾„
            append: æ˜¯å¦è¿½åŠ åˆ°ç°æœ‰å‘é‡å­˜å‚¨
        """
        print("åŠ è½½æ–‡æ¡£...")
        documents = load_documents(file_path)

        print("åˆ†å‰²æ–‡æ¡£...")
        split_docs = split_documents(documents)

        print(f"æ–‡æ¡£å·²åˆ†å‰²ä¸º {len(split_docs)} ä¸ªå—")

        if append and os.path.exists(settings.vectorstore_path):
            print("åŠ è½½ç°æœ‰å‘é‡å­˜å‚¨...")
            self.vectorstore = FAISS.load_local(
                settings.vectorstore_path,
                self.embedding_model,
                allow_dangerous_deserialization=True
            )
            print("è¿½åŠ æ–‡æ¡£åˆ°å‘é‡å­˜å‚¨...")
            self.vectorstore.add_documents(split_docs)
        else:
            print("åˆ›å»ºæ–°çš„å‘é‡å­˜å‚¨...")
            self.vectorstore = FAISS.from_documents(split_docs, self.embedding_model)

        print("ä¿å­˜å‘é‡å­˜å‚¨...")
        self.vectorstore.save_local(settings.vectorstore_path)
        print("å‘é‡å­˜å‚¨æ„å»ºå®Œæˆï¼")

    def load_vector_store(self) -> None:
        """
        åŠ è½½å‘é‡å­˜å‚¨
        """
        if not os.path.exists(settings.vectorstore_path):
            raise FileNotFoundError(f"å‘é‡å­˜å‚¨ä¸å­˜åœ¨: {settings.vectorstore_path}")

        self.vectorstore = FAISS.load_local(
            settings.vectorstore_path,
            self.embedding_model,
            allow_dangerous_deserialization=True
        )

    def _build_chain(self) -> None:
        """
        æ„å»º RAG é“¾
        """
        if self.vectorstore is None:
            raise ValueError("å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–ï¼Œè¯·å…ˆæ„å»ºæˆ–åŠ è½½å‘é‡å­˜å‚¨")

        # åˆ›å»ºæ£€ç´¢å™¨
        retriever = self.vectorstore.as_retriever(
            search_type="similarity",
            search_kwargs={"k": settings.top_k}
        )

        # åˆ›å»ºæç¤ºæ¨¡æ¿
        template = """åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”é—®é¢˜ã€‚å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯´"æˆ‘æ— æ³•ä»æä¾›çš„çŸ¥è¯†åº“ä¸­æ‰¾åˆ°ç›¸å…³ä¿¡æ¯"ã€‚

ä¸Šä¸‹æ–‡ï¼š
{context}

é—®é¢˜ï¼š{question}

å›ç­”ï¼š"""

        prompt = PromptTemplate(
            template=template,
            input_variables=["context", "question"]
        )

        # æ„å»º QA é“¾
        self.qa_chain = RetrievalQA.from_chain_type(
            llm=self.llm,
            chain_type="stuff",
            retriever=retriever,
            chain_type_kwargs={"prompt": prompt},
            return_source_documents=True
        )

    def _format_docs(self, docs: List[Document]) -> str:
        """
        æ ¼å¼åŒ–æ–‡æ¡£åˆ—è¡¨

        Args:
            docs: æ–‡æ¡£åˆ—è¡¨

        Returns:
            str: æ ¼å¼åŒ–åçš„æ–‡æ¡£å­—ç¬¦ä¸²
        """
        return "\n\n".join(doc.page_content for doc in docs)

    def query(self, question: str) -> str:
        """
        æ‰§è¡ŒæŸ¥è¯¢

        Args:
            question: æŸ¥è¯¢é—®é¢˜

        Returns:
            str: ç­”æ¡ˆ
        """
        if self.qa_chain is None:
            self._build_chain()

        result = self.qa_chain({"query": question})
        return result["result"]

    def add_documents(self, documents: List[Document]) -> None:
        """
        æ·»åŠ æ–‡æ¡£åˆ°å‘é‡å­˜å‚¨

        Args:
            documents: è¦æ·»åŠ çš„æ–‡æ¡£åˆ—è¡¨
        """
        if self.vectorstore is None:
            raise ValueError("å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–")

        split_docs = split_documents(documents)
        self.vectorstore.add_documents(split_docs)
        self.vectorstore.save_local(settings.vectorstore_path)</code></pre>

    <h3>8.2 RAGChain ç±»åˆå§‹åŒ–</h3>
    <p>RAGChain ç±»æ˜¯æ•´ä¸ª RAG ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œè´Ÿè´£åè°ƒå„ä¸ªæ¨¡å—çš„å·¥ä½œã€‚</p>
    <ul>
      <li>åˆå§‹åŒ– LLM å’ŒåµŒå…¥æ¨¡å‹å®ä¾‹</li>
      <li>ç»´æŠ¤å‘é‡å­˜å‚¨å’Œ QA é“¾çš„å¼•ç”¨</li>
    </ul>

    <h3>8.3 æ„å»ºå‘é‡å­˜å‚¨ï¼šbuild_vector_store()</h3>
    <p>è¯¥æ–¹æ³•è´Ÿè´£ä»æ–‡æ¡£æ„å»ºå‘é‡å­˜å‚¨ï¼š</p>
    <ul>
      <li>åŠ è½½å¹¶åˆ†å‰²æ–‡æ¡£</li>
      <li>æ”¯æŒè¿½åŠ æ¨¡å¼å’Œæ–°å»ºæ¨¡å¼</li>
      <li>ä¿å­˜å‘é‡å­˜å‚¨åˆ°æœ¬åœ°</li>
    </ul>

    <h3>8.4 åŠ è½½å‘é‡å­˜å‚¨ï¼šload_vector_store()</h3>
    <p>åŠ è½½å·²å­˜åœ¨çš„å‘é‡å­˜å‚¨ä»¥ä¾›æŸ¥è¯¢ä½¿ç”¨ã€‚</p>

    <h3>8.5 æ„å»º RAG é“¾ï¼š_build_chain()</h3>
    <p>åˆ›å»ºå®Œæ•´çš„ RAG æŸ¥è¯¢é“¾ï¼š</p>
    <ul>
      <li>é…ç½®ç›¸ä¼¼åº¦æ£€ç´¢å™¨</li>
      <li>è®¾ç½®æç¤ºæ¨¡æ¿</li>
      <li>æ„å»º QA é“¾</li>
    </ul>

    <h3>8.6 æ ¼å¼åŒ–æ–‡æ¡£ï¼š_format_docs()</h3>
    <p>å°†æ£€ç´¢åˆ°çš„æ–‡æ¡£æ ¼å¼åŒ–ä¸ºä¸Šä¸‹æ–‡å­—ç¬¦ä¸²ã€‚</p>

    <h3>8.7 æŸ¥è¯¢å‡½æ•°ï¼šquery()</h3>
    <p>æ‰§è¡Œç”¨æˆ·æŸ¥è¯¢å¹¶è¿”å›ç­”æ¡ˆã€‚</p>

    <h3>8.8 æ·»åŠ æ–‡æ¡£ï¼šadd_documents()</h3>
    <p>åŠ¨æ€æ·»åŠ æ–°æ–‡æ¡£åˆ°ç°æœ‰å‘é‡å­˜å‚¨ã€‚</p>
  </section>

  <section class="section" id="main_program">
    <h2>ä¹ã€ä¸»ç¨‹åºæ¨¡å—è¯¦è§£ï¼ˆmain.pyï¼‰</h2>

    <h3>9.1 å®Œæ•´æ ·ä¾‹ä»£ç </h3>
    <pre><code class="language-python">"""
RAG ç³»ç»Ÿä¸»ç¨‹åº
"""
import argparse
import sys
from chains.rag_chain import RAGChain

def main():
    parser = argparse.ArgumentParser(description="RAG æ£€ç´¢å¢å¼ºçŸ¥è¯†é—®ç­”ç³»ç»Ÿ")
    parser.add_argument("--mode", choices=["build", "query", "interactive"],
                       required=True, help="è¿è¡Œæ¨¡å¼")
    parser.add_argument("--file", help="æ„å»ºæ¨¡å¼ä¸‹çš„æ–‡æ¡£æ–‡ä»¶è·¯å¾„")
    parser.add_argument("--question", help="æŸ¥è¯¢æ¨¡å¼ä¸‹çš„é—®é¢˜")
    parser.add_argument("--append", action="store_true",
                       help="æ˜¯å¦è¿½åŠ åˆ°ç°æœ‰å‘é‡å­˜å‚¨")

    args = parser.parse_args()

    # åˆ›å»º RAG å®ä¾‹
    rag = RAGChain()

    if args.mode == "build":
        # æ„å»ºæ¨¡å¼
        if not args.file:
            print("é”™è¯¯: æ„å»ºæ¨¡å¼éœ€è¦æŒ‡å®šæ–‡ä»¶è·¯å¾„ (--file)")
            print("ç¤ºä¾‹: python main.py --mode build --file kb.txt")
            return

        try:
            rag.build_vector_store(args.file, args.append)
            print("å‘é‡å­˜å‚¨æ„å»ºæˆåŠŸï¼")
        except Exception as e:
            print(f"æ„å»ºå¤±è´¥: {e}")
            return

    elif args.mode == "query":
        # æŸ¥è¯¢æ¨¡å¼
        if not args.question:
            print("é”™è¯¯: æŸ¥è¯¢æ¨¡å¼éœ€è¦æŒ‡å®šé—®é¢˜ (--question)")
            print("ç¤ºä¾‹: python main.py --mode query --question \"å¸Œå†€å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ\"")
            return

        try:
            rag.load_vector_store()
            answer = rag.query(args.question)
            print(f"é—®é¢˜: {args.question}")
            print(f"ç­”æ¡ˆ: {answer}")
        except FileNotFoundError:
            print("é”™è¯¯: å‘é‡å­˜å‚¨ä¸å­˜åœ¨ã€‚è¯·å…ˆä½¿ç”¨ build æ¨¡å¼æ„å»ºå‘é‡å­˜å‚¨ã€‚")
            print("ç¤ºä¾‹å‘½ä»¤: python main.py --mode build --file your_document.txt")
            return
        except Exception as e:
            print(f"æŸ¥è¯¢å¤±è´¥: {e}")
            return

    elif args.mode == "interactive":
        # äº¤äº’æ¨¡å¼
        print("æ­£åœ¨åŠ è½½å‘é‡å­˜å‚¨...")
        try:
            rag.load_vector_store()
        except FileNotFoundError:
            print("é”™è¯¯: å‘é‡å­˜å‚¨ä¸å­˜åœ¨ã€‚è¯·å…ˆä½¿ç”¨ build æ¨¡å¼æ„å»ºå‘é‡å­˜å‚¨ã€‚")
            print("ç¤ºä¾‹å‘½ä»¤: python main.py --mode build --file your_document.txt")
            return

        print("RAG ç³»ç»Ÿå·²å°±ç»ªï¼è¾“å…¥ 'quit' æˆ– 'exit' é€€å‡ºã€‚\n")

        while True:
            question = input("è¯·è¾“å…¥æ‚¨çš„é—®é¢˜: ").strip()

            if question.lower() in ["quit", "exit", "é€€å‡º"]:
                print("å†è§ï¼")
                break

            if not question:
                continue

            try:
                print("æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...")
                answer = rag.query(question)
                print(f"\nç­”æ¡ˆ:\n{answer}\n")
            except Exception as e:
                print(f"é”™è¯¯: {e}\n")

if __name__ == "__main__":
    main()</code></pre>

    <h3>9.2 å‘½ä»¤è¡Œå‚æ•°è§£æ</h3>
    <p>ç¨‹åºæ”¯æŒä¸‰ç§è¿è¡Œæ¨¡å¼ï¼š</p>
    <ul>
      <li><code>--mode build</code>: æ„å»ºå‘é‡å­˜å‚¨</li>
      <li><code>--mode query</code>: å•æ¬¡æŸ¥è¯¢</li>
      <li><code>--mode interactive</code>: äº¤äº’å¼å¯¹è¯</li>
    </ul>

    <h3>9.3 æ„å»ºæ¨¡å¼ï¼ˆbuildï¼‰</h3>
    <p><strong>åŠŸèƒ½</strong>ï¼šä»æ–‡æ¡£æ„å»ºå‘é‡å­˜å‚¨</p>
    <p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
    <pre><code class="language-bash">python main.py --mode build --file kb.txt</code></pre>

    <h3>9.4 æŸ¥è¯¢æ¨¡å¼ï¼ˆqueryï¼‰</h3>
    <p><strong>åŠŸèƒ½</strong>ï¼šåŠ è½½å·²æœ‰å‘é‡å­˜å‚¨ï¼Œæ‰§è¡Œå•æ¬¡æŸ¥è¯¢</p>
    <p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
    <pre><code class="language-bash">python main.py --mode query --question "å¸Œå†€å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ"</code></pre>

    <h3>9.5 äº¤äº’æ¨¡å¼ï¼ˆinteractiveï¼‰</h3>
    <p><strong>åŠŸèƒ½</strong>ï¼šå¯åŠ¨äº¤äº’å¼å¯¹è¯å¾ªç¯ï¼Œæ”¯æŒæŒç»­æ¥æ”¶ç”¨æˆ·é—®é¢˜</p>
    <p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
    <pre><code class="language-bash">python main.py --mode interactive</code></pre>
  </section>

  <section class="section" id="experiment_steps">
    <h2>åã€å®éªŒæ­¥éª¤</h2>

    <h3>10.1 å®éªŒæ­¥éª¤1ï¼šå®‰è£…ä¾èµ–</h3>
    <p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…é¡¹ç›®ä¾èµ–ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š</p>
    <pre><code class="language-bash">pip install -r requirements.txt</code></pre>

    <p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
    <ul>
      <li><code>langchain</code>: LangChain æ ¸å¿ƒåº“</li>
      <li><code>langchain-openai</code>: OpenAI å…¼å®¹æ¥å£</li>
      <li><code>langchain-community</code>: ç¤¾åŒºæ‰©å±•ï¼ˆåŒ…å«æ–‡æ¡£åŠ è½½å™¨ç­‰ï¼‰</li>
      <li><code>faiss-cpu</code>: FAISS å‘é‡æ•°æ®åº“ï¼ˆCPU ç‰ˆæœ¬ï¼‰</li>
      <li><code>pydantic-settings</code>: é…ç½®ç®¡ç†</li>
      <li><code>pypdf</code>: PDF æ–‡ä»¶å¤„ç†</li>
    </ul>

    <h3>10.2 å®éªŒæ­¥éª¤2ï¼šæ„å»ºå‘é‡å­˜å‚¨</h3>
    <p>ä½¿ç”¨æä¾›çš„çŸ¥è¯†åº“æ–‡ä»¶ <code>kb.txt</code> æ„å»ºå‘é‡å­˜å‚¨ï¼š</p>
    <pre><code class="language-bash">python main.py --mode build --file kb.txt</code></pre>

    <p><strong>æ‰§è¡Œè¿‡ç¨‹</strong>ï¼š</p>
    <ol>
      <li>åŠ è½½ <code>kb.txt</code> æ–‡ä»¶</li>
      <li>å°†æ–‡æ¡£åˆ†å‰²æˆå°å—</li>
      <li>ä½¿ç”¨åµŒå…¥æ¨¡å‹å°†æ¯ä¸ªå—è½¬æ¢ä¸ºå‘é‡</li>
      <li>ä½¿ç”¨ FAISS åˆ›å»ºå‘é‡ç´¢å¼•</li>
      <li>ä¿å­˜åˆ° <code>vectorstore/</code> ç›®å½•</li>
    </ol>

    <h3>10.3 å®éªŒæ­¥éª¤3ï¼šäº¤äº’å¼æŸ¥è¯¢</h3>
    <p>æ„å»ºå‘é‡å­˜å‚¨åï¼Œå¯åŠ¨äº¤äº’å¼æŸ¥è¯¢ï¼š</p>
    <pre><code class="language-bash">python main.py --mode interactive</code></pre>

    <h3>10.4 å®éªŒæ­¥éª¤4ï¼šå•æ¬¡æŸ¥è¯¢</h3>
    <p>ä¹Ÿå¯ä»¥ä½¿ç”¨å•æ¬¡æŸ¥è¯¢æ¨¡å¼ï¼š</p>
    <pre><code class="language-bash">python main.py --mode query --question "å¸Œå†€å¹³å°æ˜¯ä»€ä¹ˆï¼Ÿ"</code></pre>

    <h3>10.5 å®éªŒæ­¥éª¤5ï¼šä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£</h3>
    <p>å¯ä»¥ä½¿ç”¨è‡ªå·±çš„æ–‡æ¡£æ„å»ºçŸ¥è¯†åº“ã€‚æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š</p>
    <ul>
      <li><code>.txt</code>: çº¯æ–‡æœ¬æ–‡ä»¶</li>
      <li><code>.pdf</code>: PDF æ–‡ä»¶</li>
      <li><code>.md</code> / <code>.markdown</code>: Markdown æ–‡ä»¶</li>
    </ul>

    <p><strong>ç¤ºä¾‹</strong>ï¼š</p>
    <pre><code class="language-bash"># ä½¿ç”¨ PDF æ–‡ä»¶
python main.py --mode build --file your_document.pdf

# ä½¿ç”¨ Markdown æ–‡ä»¶
python main.py --mode build --file your_document.md</code></pre>
  </section>

  <section class="section" id="tasks">
    <h2>åä¸€ã€å®éªŒä»»åŠ¡</h2>

    <h3>11.1 åŸºç¡€ä»»åŠ¡</h3>
    <p>å‚è€ƒå®éªŒæ­¥éª¤ï¼Œå®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š</p>
    <ol>
      <li><strong>ç¯å¢ƒæ­å»º</strong>ï¼šå®‰è£…æ‰€æœ‰ä¾èµ–ï¼Œç¡®ä¿ç³»ç»Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ</li>
      <li><strong>å‘é‡å­˜å‚¨æ„å»º</strong>ï¼šä½¿ç”¨ <code>kb.txt</code> æ„å»ºå‘é‡å­˜å‚¨ï¼Œè§‚å¯Ÿæ„å»ºè¿‡ç¨‹å’Œè¾“å‡ºä¿¡æ¯</li>
      <li><strong>äº¤äº’å¼æŸ¥è¯¢</strong>ï¼šå¯åŠ¨äº¤äº’æ¨¡å¼ï¼Œå°è¯•æå‡ºä¸åŒç±»å‹çš„é—®é¢˜ï¼Œè§‚å¯Ÿç³»ç»Ÿå›ç­”çš„è´¨é‡</li>
      <li><strong>å•æ¬¡æŸ¥è¯¢æµ‹è¯•</strong>ï¼šä½¿ç”¨ query æ¨¡å¼æµ‹è¯•ä¸åŒçš„é—®é¢˜ï¼Œè®°å½•ç­”æ¡ˆè´¨é‡</li>
    </ol>

    <h3>11.2 æ‰©å±•ä»»åŠ¡</h3>

    <h4>11.2.1 ä½¿ç”¨è‡ªå®šä¹‰çŸ¥è¯†åº“</h4>
    <ol>
      <li>å‡†å¤‡ä¸€ä¸ªè‡ªå·±æ„Ÿå…´è¶£é¢†åŸŸçš„æ–‡æ¡£ï¼ˆå¦‚æŠ€æœ¯æ–‡æ¡£ã€å­¦æœ¯è®ºæ–‡ã€æ ¡å›­é€šçŸ¥ç­‰ï¼‰</li>
      <li>ä½¿ç”¨è¯¥æ–‡æ¡£æ„å»ºå‘é‡å­˜å‚¨</li>
      <li>æµ‹è¯•ç³»ç»Ÿå¯¹è¯¥é¢†åŸŸé—®é¢˜çš„å›ç­”èƒ½åŠ›</li>
    </ol>

    <h4>11.2.2 å‚æ•°è°ƒä¼˜å®éªŒ</h4>
    <ol>
      <li>ä¿®æ”¹ <code>config/settings.py</code> ä¸­çš„ <code>CHUNK_SIZE</code> å’Œ <code>CHUNK_OVERLAP</code> å‚æ•°</li>
      <li>è§‚å¯Ÿä¸åŒå‚æ•°å¯¹æ£€ç´¢æ•ˆæœçš„å½±å“</li>
      <li>ä¿®æ”¹ <code>TOP_K</code> å‚æ•°ï¼Œè§‚å¯Ÿè¿”å›æ–‡æ¡£æ•°é‡å¯¹ç­”æ¡ˆè´¨é‡çš„å½±å“</li>
    </ol>

    <h4>11.2.3 å¤šæ–‡æ¡£çŸ¥è¯†åº“</h4>
    <ol>
      <li>æŸ¥é˜…æ–‡æ¡£ï¼Œæ€è€ƒå¦‚ä½•æ”¯æŒwordã€excelæ–‡æ¡£çš„æ£€ç´¢</li>
      <li>ä¿®æ”¹ä»£ç ï¼Œå°è¯•å®ç°</li>
      <li>å°è¯•æ”¯æŒå…¶ä»–æ ¼å¼æ–‡æ¡£ï¼ˆå¦‚Wordã€Excelç­‰ï¼‰</li>
    </ol>
  </section>

  <section class="section" id="steps">
    <h2>å››ã€RAG ä»‹ç»ä¸è¯¦ç»†æ­¥éª¤</h2>
    <p>
      RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿçš„æ ¸å¿ƒæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š
      â€œ<strong>ç”¨æˆ·æé—® â†’ æ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ â†’ å°†ä¸Šä¸‹æ–‡é€å…¥å¤§æ¨¡å‹ â†’ ç”Ÿæˆæ›´æœ‰ä¾æ®çš„ç­”æ¡ˆ</strong>â€ã€‚
    </p>
    <ul>
      <li>æä¾›äº‹å®ä¾æ®ï¼šç­”æ¡ˆåŸºäºå®é™…æ–‡æ¡£å†…å®¹ï¼Œè€Œéæ¨¡å‹è®­ç»ƒæ•°æ®ã€‚</li>
      <li>å‡å°‘â€œå¹»è§‰â€ï¼šé€šè¿‡æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡çº¦æŸï¼Œé™ä½æ¨¡å‹ç¼–é€ ä¿¡æ¯çš„å¯èƒ½æ€§ã€‚</li>
      <li>æ”¯æŒçŸ¥è¯†æ›´æ–°ï¼šåªéœ€æ›´æ–°çŸ¥è¯†åº“ï¼Œæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚</li>
      <li>æé«˜å‡†ç¡®æ€§ï¼šé’ˆå¯¹ç‰¹å®šé¢†åŸŸçŸ¥è¯†åº“å¯ä»¥æå‡ä¸“ä¸šæ€§ã€‚</li>
    </ul>
    <p>
      æ›´è¯¦ç»†æ“ä½œæ­¥éª¤å¯å‚è€ƒåœ¨çº¿èµ„æ–™ï¼š
      <a href="https://tnt.georgedonne.cn/ailab/nlp251113" target="_blank">
        RAG æ£€ç´¢å¢å¼ºçŸ¥è¯†é—®ç­”ç³»ç»Ÿå®éªŒæ–‡æ¡£
      </a>
    </p>
  </section>

  <section class="section" id="report">
    <h2>åäºŒã€å®éªŒæŠ¥å‘Šè¦æ±‚</h2>

    <h3>12.1 å®éªŒè¿‡ç¨‹è®°å½•</h3>
    <ol>
      <li><strong>å®éªŒè¿‡ç¨‹è®°å½•</strong>ï¼š
        <ul>
          <li>è®°å½•å®Œæ•´çš„å®éªŒæ­¥éª¤ï¼ŒåŒ…æ‹¬ç¯å¢ƒæ­å»ºã€å‘é‡å­˜å‚¨æ„å»ºã€æŸ¥è¯¢æµ‹è¯•ç­‰</li>
          <li>æä¾›å…³é”®æ­¥éª¤çš„æˆªå›¾æˆ–è¾“å‡ºç»“æœ</li>
          <li>è®°å½•ä½¿ç”¨è‡ªå®šä¹‰æ–‡æ¡£çš„å®éªŒè¿‡ç¨‹å’Œç»“æœ</li>
        </ul>
      </li>
      <li><strong>ä»£ç ç†è§£åˆ†æ</strong>ï¼š
        <ul>
          <li>åˆ†ææ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½å’Œå®ç°åŸç†</li>
          <li>è¯´æ˜ RAG ç³»ç»Ÿçš„å·¥ä½œæµç¨‹</li>
          <li>è§£é‡Šå‘é‡æ£€ç´¢å’Œç­”æ¡ˆç”Ÿæˆçš„è¿‡ç¨‹</li>
        </ul>
      </li>
    </ol>

    <h3>12.2 æ€è€ƒé¢˜</h3>
    <ol>
      <li><strong>æ€è€ƒé¢˜1</strong>ï¼šRAG ç³»ç»Ÿç›¸æ¯”ç›´æ¥ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œå±€é™æ€§ï¼Ÿè¯·ä»å‡†ç¡®æ€§ã€å®æ—¶æ€§ã€æˆæœ¬ç­‰è§’åº¦è¿›è¡Œåˆ†æ</li>
      <li><strong>æ€è€ƒé¢˜2</strong>ï¼šæ–‡æ¡£åˆ†å‰²ç­–ç•¥ï¼ˆchunk_size å’Œ chunk_overlapï¼‰å¯¹æ£€ç´¢æ•ˆæœæœ‰ä»€ä¹ˆå½±å“ï¼Ÿå¦‚ä½•é€‰æ‹©åˆé€‚çš„å‚æ•°ï¼Ÿ</li>
      <li><strong>æ€è€ƒé¢˜3</strong>ï¼šRAG æŠ€æœ¯åœ¨å“ªäº›é¢†åŸŸæœ‰æ½œåœ¨åº”ç”¨ï¼Ÿè¯·ç»“åˆä½ çš„ä¸“ä¸šèƒŒæ™¯ï¼Œè°ˆè°ˆ RAG æŠ€æœ¯å¦‚ä½•è§£å†³å®é™…é—®é¢˜</li>
    </ol>

    <h3>12.3 é—®é¢˜ä¸æ”¹è¿›</h3>
    <ol>
      <li>è®°å½•å®éªŒè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•</li>
      <li>æå‡ºå¯¹ç³»ç»Ÿçš„æ”¹è¿›å»ºè®®</li>
      <li>æ€è€ƒå¦‚ä½•ä¼˜åŒ–æ£€ç´¢æ•ˆæœå’Œç­”æ¡ˆè´¨é‡</li>
    </ol>
  </section>

  <div class="sub-nav">
    <a href="index.html">è¿”å›é¦–é¡µ</a> |
    <a href="exp2_voice_agent.html">å‰å¾€å®éªŒäºŒï¼šè¯­éŸ³AIä»£ç†</a> |
    <a href="exp3_robot.html">å‰å¾€å®éªŒä¸‰ï¼šæœºæ¢°è‡‚åƒåœ¾åˆ†ç±»</a> |
    <a href="exp4_video.html">å‰å¾€å®éªŒå››ï¼šAIè§†é¢‘ç¼–è¾‘</a> |
    <a href="exp5_web_design.html">å‰å¾€å®éªŒäº”ï¼šç½‘é¡µåˆ¶ä½œ</a> |
    <a href="#top">è¿”å›é¡¶éƒ¨</a>
  </div>
</main>

<footer class="site-footer">
  <p>å¤šåª’ä½“è¯¾ç¨‹å®éªŒåœ¨çº¿å¹³å°</p>
</footer>
</body>
</html>


